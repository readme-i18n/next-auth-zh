import { Callout } from "nextra/components"

# 调试

调试 Auth.js 首先需要在主配置中启用 `debug` 选项。

```ts filename="./auth.ts" {4}
import NextAuth from "next-auth"

export const { handlers, auth } = NextAuth({
  debug: true,
})
```

该选项会使用 `console` 方法输出认证流程的详细信息，包括请求、响应、错误以及数据库请求和响应。

## 日志记录

您可以通过自定义日志记录器来调整日志输出格式。这在需要将日志发送到日志服务或自定义日志格式时非常有用。

```ts filename="./auth.ts"
import log from "logging-service"
export const { handlers, auth } = NextAuth({
  logger: {
    error(code, ...message) {
      log.error(code, message)
    },
    warn(code, ...message) {
      log.warn(code, message)
    },
    debug(code, ...message) {
      log.debug(code, message)
    },
  },
})
```

<Callout type="warning">
  在生产环境启用 `debug`
  选项可能导致敏感信息被记录到日志中。请确保对任何敏感信息进行脱敏处理。
</Callout>

当设置了 `logger` 选项时，`debug` 选项将被忽略
